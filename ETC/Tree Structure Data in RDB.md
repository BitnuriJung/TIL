<br/>

# 트리구조의 데이터를 RDB에 저장하는 법

- 트리 구조를 DB에 저장하는 방법
    
    → SQL Anti Patterns 라는 책이 유명한가봄 
    
    1. 기본 데이터 + 조상 id를 추가 저장하는 방법 
        
        → 1:1 문의 게시판처럼 트리의 깊이가 깊게 들어가지 않는 경우 1개의 테이블로 간편하게 저장 가능 
        
        트리의 깊이가 깊어질수록 시간이 오래 걸린다고 함 
        
    2. 클로저 테이블 사용 
        - 기본 데이터가 저장된 테이블 + 관계 내용이 저장된 클로저 테이블 2개로 구현
        - 클로저 테이블에 노드-리프 전체 관계를 저장함
        - 바로 윗단계만 저장하는 게 아니라 연결된 모든 관계를 다 저장하는 방식
        - Depth 정보를 추가 저장할수도 있음
        - 추가, 수정, 삭제가 꽤 복잡함 ( 프로시져 추가 공부 필요 )
    
            ![B7F759A8-F33E-406F-A7A0-1D4CFD6876EF.jpeg](/images/closer%20table.png)

    
    출처
        [트리구조 저장하는 방법 클로저 테이블](https://wildeveloperetrain.tistory.com/150)
        